let chart=document['querySelector']('#chart-data');const showUserAmount=0x32;async function updateScoreboard(_0x4c5da9){const _0x4f55da=_0x4c5da9;let _0x3f3405=0x2;ctfRoom&&(_0x3f3405+=0x2,document['querySelector']('#scoreboard_table')['classList']='table\x20table-bordered\x20table-condensed\x20table-header-rotated');let _0x3ef7e0=document['querySelector']('#scoreboard_header');_0x4f55da['length']>0x0&&_0x4f55da[0x0]['taskData']['length']>0x0&&_0x3ef7e0&&(_0x3ef7e0['innerHTML']='<th\x20class=\x22rotated\x22\x20colspan=\x22'+_0x3f3405+'\x22><div\x20class=\x22rotated-left-edge\x22></div></th>',_0x4f55da[0x0]['taskData']['forEach'](function(_0x1abae1){let _0x437efb='[Task\x20'+_0x1abae1['taskNo']+']\x20#'+_0x1abae1['questionNo'];_0x437efb='<th\x20class=\x22rotated\x22><div\x20class=\x22category-header-0\x22><span>'+_0x437efb+'</span></div></th>',_0x3ef7e0['innerHTML']+=_0x437efb;}),_0x3ef7e0['innerHTML']+='<th\x20class=\x22rotated\x22><div\x20class=\x22rotated-right-edge\x22></div></th>');let _0x2d09f8=document['querySelector']('#scoreboard_body');_0x2d09f8&&(_0x2d09f8['innerHTML']='',_0x4f55da['forEach'](async function(_0x35e9a1,_0x510bd2){const _0x367140=_0x35e9a1['rankNo']?_0x35e9a1['rankNo']:_0x510bd2+0x1;let _0x255eb1='<tr\x20class=\x22scoreboard_row\x22>';_0x255eb1='<td\x20class=\x22scoreboard_rank\x22>'+_0x367140+'</td>';if(ctfRoom){teamUni=_0x35e9a1['university'];let _0x1fb613='';for(let _0x2da8f3 of _0x35e9a1['members']){_0x1fb613+='<a\x20class=\x22nocss\x22\x20target=\x22_blank\x22\x20href=\x22/p/'+_0x2da8f3+'\x22>'+_0x2da8f3+'</a></br>';}teamUniCode='<img\x20class=\x22uni-icon-very-small\x22\x20data-toggle=\x22tooltip\x22\x20data-html=\x22true\x22\x20title=\x22'+jsUcfirst(teamUni)+'\x22\x20data-placement=\x22right\x22\x20onerror=\x22teamImageRan(this)\x22\x20src=\x22https://assets.tryhackme.com/img/unis/'+teamUni+'.jpg\x22>',_0x255eb1+='<td\x20class=\x22scoreboard_name\x22>'+teamUniCode+'</td>',_0x255eb1+='<td\x20class=\x22scoreboard_name\x22>'+_0x35e9a1['name']+'</td>',_0x255eb1+='<td\x20class=\x22scoreboard_name\x20small\x20faded\x22>'+_0x1fb613+'</td>';}else _0x255eb1+='<td\x20class=\x22scoreboard_name\x22\x20style=\x27line-height:0;\x27>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x27d-inline-block\x27>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22media\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20class=\x22user-square-img-med\x20mr-2\x22\x20src=\x22'+_0x35e9a1['avatar']+'\x22/>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22media-body\x20text-left\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h5\x20class=\x22mb-2\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20class=\x22nocss\x22\x20href=\x22/p/'+_0x35e9a1['name']+'\x22>'+_0x35e9a1['name']+'</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</h5>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x27m-0\x20size-12\x27><span\x20class=\x22level-simple-design\x20level\x20level-'+_0x35e9a1['level']+'\x22></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>';_0x35e9a1['taskData']['forEach'](function(_0x22ac6e){let _0xa8eed4='<i\x20class=\x22fas\x20fa-check-circle\x20scoreboard-points\x22\x20data-toggle=\x22tooltip\x22\x20data-placement=\x22top\x22\x20title=\x22'+_0x22ac6e['score']+'\x20points\x22></i>';!_0x22ac6e['correct']&&(_0xa8eed4='<i\x20class=\x22fas\x20fa-check-circle\x22\x20style=\x22opacity:\x200.2;\x22></i>'),_0x255eb1+='<td\x20class=\x22scoreboard_check\x22>'+_0xa8eed4+'</td>';}),_0x255eb1+='<td\x20class=\x22scoreboard_score\x22>'+_0x35e9a1['totalScore']+'</td>',_0x255eb1+='</tr>',_0x2d09f8['innerHTML']+=_0x255eb1,$('.scoreboard-points')['tooltip']();})),ctfRoom&&$(function(){$('.uni-icon-very-small')['tooltip']();});}function getTeamUni(_0x484f4f,_0x2cfe9b){for(let _0x484a05 of _0x484f4f){if(_0x484a05['name']==_0x2cfe9b)return _0x484a05['university'];}return'N/a';}async function getAllTeams(){return new Promise(async function(_0x373299,_0x2e6363){$['getJSON']('/api/mentor/getAllTeams',function(_0x4bee5e){return _0x373299(_0x4bee5e);});});}function showChart(_0x32d74f){$['getJSON']('/api/getgraphdata/10/'+_0x32d74f,async function(_0x4095c9){populateChart(_0x4095c9);});}function populateChart(_0x32b3c5){if(_0x32b3c5['length']>0x0){updateScoreboard(_0x32b3c5);if(ctfRoom)generateBarChart(_0x32b3c5);else{const _0x125d70=genChartDataNew(_0x32b3c5);setChartDataNew(_0x125d70);}}else{const _0x3d5bc8=document['querySelector']('#scoreboard');if(_0x3d5bc8){_0x3d5bc8['innerHTML']='</br><div\x20class=\x22alert\x20alert-info\x22\x20id=\x22ctf-scoreboard\x22\x20role=\x22alert\x22>There\x20are\x20no\x20scores\x20to\x20show\x20yet.</div>';let _0x3e934e=document['querySelector']('#chart-data');_0x3e934e['innerHTML']='<div\x20class=\x22alert\x20alert-info\x22\x20id=\x22ctf-chart\x22\x20role=\x22alert\x22>No\x20chart\x20data\x20to\x20display.</div>',_0x3e934e['style']['height']='auto';}}}function generateLineGraph(_0x302c22){let _0x477bff=[],_0x56807f=0x32;for(let _0xd30042 of _0x302c22){_0x477bff['push']({'name':_0xd30042['name'],'data':_0xd30042['data']});for(const _0x38119f of _0xd30042['data']){_0x38119f['length']>=0x2&&(_0x38119f[0x1]>_0x56807f&&(_0x56807f=_0x38119f[0x1]+0x32));}}const _0x17a9c7='Highest\x20Scoring\x20Users';Highcharts['chart'](chart,{'chart':{'backgroundColor':'rgba(0,0,0,0)'},'title':{'text':_0x17a9c7},'exporting':{'enabled':![]},'credits':{'enabled':![]},'yAxis':{'lineWidth':0x0,'title':{'text':''},'min':0x0,'max':_0x56807f},'xAxis':{'labels':{'enabled':![]},'min':0x1,'tickInterval':0x1},'legend':{'layout':'vertical','align':'right','verticalAlign':'middle'},'series':_0x477bff,'responsive':{'rules':[{'condition':{'maxWidth':0x1f4},'chartOptions':{'legend':{'layout':'horizontal','align':'center','verticalAlign':'bottom'}}}]}});}function generateBarChart(_0x4b8941){let _0x3af564=[],_0x48a084=[],_0x3facf9=[];for(let _0x2c001a of _0x4b8941){_0x2c001a['totalScore']>0x0&&(_0x48a084['push'](_0x2c001a['name']['slice'](0x0,0xc)),_0x3facf9['push'](_0x2c001a['totalScore']));}Highcharts['chart'](chart,{'title':{'text':'Team\x20Score'},'chart':{'type':'column'},'exporting':{'enabled':![]},'credits':{'enabled':![]},'yAxis':{'title':{'text':''},'min':0x0},'xAxis':{'categories':_0x48a084},'series':[{'type':'column','colorByPoint':!![],'data':_0x3facf9,'showInLegend':![]}],'tooltip':{'pointFormat':'Score:\x20<b>{point.y}</b>'},'legend':{'layout':'vertical','align':'right','verticalAlign':'middle'},'responsive':{'rules':[{'condition':{'maxWidth':0x12c},'chartOptions':{'legend':{'layout':'horizontal','align':'center','verticalAlign':'bottom'}}}]}});}function genChartDataNew(_0x2146f4){console['log'](_0x2146f4);let _0x108e81=[],_0x24bb55=[],_0x1a1708='-';for(const _0x4aa8e0 of _0x2146f4){_0x24bb55['push']({'name':_0x4aa8e0['name'],'currentPoints':0x0,'data':[]});for(const _0x5b1c66 of _0x4aa8e0['taskData']){_0x108e81['push']({'name':_0x4aa8e0['name'],'points':_0x5b1c66['score'],'awarded':_0x5b1c66['timeCorrect']});}}_0x108e81=_0x108e81=_['sortBy'](_0x108e81,'awarded');let _0x5d37ee=[];for(const _0x19f894 of _0x108e81){if(_0x19f894['awarded']!=0x0){for(let _0x2f9c39 of _0x24bb55){_0x2f9c39['name']==_0x19f894['name']?(_0x2f9c39['currentPoints']+=_0x19f894['points'],_0x2f9c39['data']['push'](_0x2f9c39['currentPoints'])):_0x2f9c39['data']['push'](_0x2f9c39['currentPoints']);}_0x5d37ee['push'](_0x19f894['awarded']);}}return console['log'](_0x24bb55,_0x5d37ee),{'series':_0x24bb55,'labels':_0x5d37ee};}let apexChart,apexChartAnimations={'enabled':!![]};function setChartDataNew(_0x432c5c){if(apexChart)apexChart['destroy']();const _0x4c461d=_0x432c5c['labels'];let _0x519cb5=[];for(const _0x22e614 of _0x4c461d){_0x519cb5['push'](prettifyDate3(_0x22e614));}const _0x34465c=_0x432c5c['series'];let _0x48aeed=[];for(const _0x3b4f6b of _0x34465c){_0x48aeed['push']({'name':_0x3b4f6b['name'],'type':'line','data':_0x3b4f6b['data']});}var _0x527855={'series':_0x48aeed,'chart':{'animations':apexChartAnimations,'zoom':{'enabled':![]},'height':0x15e,'type':'line','toolbar':{'show':![]}},'stroke':{'curve':'smooth'},'fill':{'type':'solid','opacity':[0.35,0x1]},'labels':_0x519cb5,'markers':{'size':0x0},'yaxis':{},'xaxis':{'tooltip':{'enabled':![]},'labels':{'show':![]}},'selection':{'enabled':![]},'tooltip':{'shared':!![],'intersect':![],'y':{'formatter':function(_0x67c97c){if(typeof _0x67c97c!=='undefined')return _0x67c97c['toFixed'](0x0)+'\x20points';return _0x67c97c;}},'x':{'format':'dd\x20MMM'}}};apexChart=new ApexCharts(document['querySelector']('#chart-data'),_0x527855),apexChart['render'](),apexChartAnimations['enabled']=![];}